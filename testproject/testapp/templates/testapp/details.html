<html>
<head>

  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
</head>

<body>
       <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Add</button>
  <!-- The Modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Modal Form</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
            <form method="POST" action="create/" id="myform">
    {% csrf_token %}
    Company Name:<input type="text" name="company_name"><br/>
    Company Location:<input type="text" name="company_location"><br/>
   <input type="submit" value="submit">

</form>


        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>



    {% if company_list %}

    <table id="mytable">

        {% for c in company_list %}
        <tr>
            <th>{{ c.company_name }}</th>
            <th>{{ c.company_location }}</th>
            <th><a href=""><button>Update</button></a></th>
            <th><a href="" data-id="{{ c.id }}"><button>Delete</button></a></th>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <h1>No Company Yet!</h1>
    {% endif %}










    </body>
<script>

    $(document).ready(function(){

         $('#myform').submit(function(event){
            event.preventDefault();
            console.log("jhsdgfj");
            var tmp_id = $(this).data('id');
        $.ajax({
         type:$('#myform').attr('method'),
         url:$('#myform').attr('action') + '?id=' + tmp_id,
         data:$('#myform').serialize(),
         success: function (data) {
                $("#mytable").append('<tr><th>'+ data.company_name + '</th><th>'+data.company_location+'</th><th><a href=""><button>'+'Update'+'</button></a></th><th><a href=""><button>'+'Delete'+'</button></a></th></tr>');

         },

             error: function(xhr){
            alert("An error occured: " + xhr.status + " " + xhr.statusText);
            console.log(url);
},

         });
         });
         });




</script>

</html>